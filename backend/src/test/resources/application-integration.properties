# Integration Test Profile Configuration
# Uses TestContainers for database testing

# Database Configuration (TestContainers will override these via @DynamicPropertySource)
# spring.datasource.url will be set dynamically by BaseTestContainersIntegrationTest
# spring.datasource.username will be set dynamically by BaseTestContainersIntegrationTest  
# spring.datasource.password will be set dynamically by BaseTestContainersIntegrationTest
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=true

# System Configuration (para testes de integração)
system.maxcluster.size=2
system.directory.template=./test-data/templates
system.directory.cluster=./test-data/clusters
system.directory.scripts=./test-data/scripts
system.userpercluster=1
system.port.start=9000
system.port.end=9005

# Default Resource Limits (menores para testes)
system.default.cpu.limit=0.5
system.default.memory.limit=128
system.default.disk.limit=1
system.default.network.limit=10

# JWT Configuration (chave de teste)
jwt.secret.key=aW50ZWdyYXRpb25fdGVzdF9zZWNyZXRfa2V5X2Zvcl90ZXN0aW5nX3B1cnBvc2VzX29ubHk=
jwt.access.expiration.ms=3600000
jwt.refresh.expiration.ms=1209600000

# TestContainers Configuration
testcontainers.reuse.enable=false
testcontainers.checks.disable=true
testcontainers.ryuk.disabled=true

# Logging Configuration for Tests
logging.level.com.seveninterprise.clusterforge=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Disable Security for some integration tests
spring.security.user.name=admin
spring.security.user.password=admin
spring.security.user.roles=ADMIN

# FTP Service Configuration (timeouts menores para testes rápidos)
clusterforge.ftp.monitor.interval=10000
clusterforge.ftp.remove.wait.timeout=10
clusterforge.ftp.create.wait.timeout=10
clusterforge.ftp.port.release.check.interval=10
clusterforge.ftp.port.release.max.attempts=2
clusterforge.ftp.stop.wait.timeout=10
clusterforge.ftp.remove.verify.timeout=10
clusterforge.ftp.monitor.cache.ttl=100

# Disable some features for faster tests
clusterforge.health.check.enabled=false
clusterforge.backup.enabled=false
clusterforge.monitoring.enabled=false
clusterforge.autorestart.enabled=false
